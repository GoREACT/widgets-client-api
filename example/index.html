<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <style>
        body {
            margin: 0;
            background-color: #ffffff;
            background-size: 20px 20px;
        }
    </style>
</head>
<body>
<div style="padding: 15px;text-align: center">
    <div id="record_btn" class="btn btn-primary">Record</div>
    <div id="upload_btn" class="btn btn-primary">Upload</div>
    <div id="list_btn" class="btn btn-primary">List</div>
    <div id="playback_btn" class="btn btn-primary">Playback</div>
    <div id="review_btn" class="btn btn-primary">Review</div>

    <div class="btn-group">
        <button id="container_btn" type="button" class="btn btn-default active">Container</button>
        <button id="fs_btn" type="button" class="btn btn-default">Full Screen</button>
    </div>
</div>

<div id="containerEl" style="width: 90%;max-width: 1000px;height: 600px;margin: 0 auto"></div>

<script>
//    window.goreactConfig = {
//        baseUrl: "https://192.168.33.10"
//    };
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="../build/widgets.js"></script>

<script>

    // references to DOM elements
    var $containerBtn = $('#container_btn');
    var $fullScreenBtn = $('#fs_btn');
    var $recordBtn = $('#record_btn');
    var $uploadBtn = $('#upload_btn');
    var $listBtn = $('#list_btn');
    var $playbackBtn = $('#playback_btn');
    var $reviewBtn = $('#review_btn');
    var $containerEl = $('#containerEl');

    var activeContainer = $containerEl[0];

    $recordBtn.click(function () {
        goreact.record({container: activeContainer});
    });

    $uploadBtn.click(function () {
        goreact.upload({container: activeContainer});
    });

    $listBtn.click(function () {
        goreact.list({container: activeContainer});
    });

    $playbackBtn.click(function () {
        goreact.playback({
            goreact_id: "5584737ce76fed7f1bc8e28a",
            container: activeContainer
        });
    });

    $reviewBtn.click(function () {
        goreact.review({
            goreact_id: "5584737ce76fed7f1bc8e28a",
            container: activeContainer
        });
    });

    $containerBtn.click(function () {
        activeContainer = $containerEl[0];
        $containerBtn.addClass('active');
        $fullScreenBtn.removeClass('active');
    });

    $fullScreenBtn.click(function () {
        activeContainer = null;
        $containerBtn.removeClass('active');
        $fullScreenBtn.addClass('active');
    });

    console.log("goreact", goreact);

    var payload = {
        "settings": {
            "apiKey":"343c0789-b4f2-42de-8e81-c2b645653685",
            "expires":1442016000,
            "user_id":"208d362b-11b4-4db5-8ea1-df4edca7e2b2",
            "user_firstName":"Peter",
            "user_lastName":"Smith",
            "user_email":"john.smith@myexample.com",
            "group_id":"5432b0923ea55a487d96b076",
            "group_name":"Business Ed",
            "role":"instructor"
        },
        "signature":"068ERf8kg0iJlr1pp3PDq4gRkW8="
    };

//    promise.then(function(response) {
//        console.log("response", response);
//    });
    var listWidget = goreact.list({
        container: $containerEl[0]
    });

    console.log("listWidget", listWidget);

    listWidget.on('ready', function (evt) {
        console.log("ready");
    });

    listWidget.on('destroyed', function (evt) {
        console.log("destroyed");
    });

    var auth = goreact.authorize(payload.settings, payload.signature);

    console.log("auth", auth);

    auth.on('success', function(evt, message) {
        console.log("auth success", message);
    });

    auth.on('error', function(evt, message) {
        console.log("auth error", message);
    });

</script>
</body>
</html>