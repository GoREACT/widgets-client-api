<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <style>
        body {
            margin: 0;
            background-color: #ffffff;
            background-size: 20px 20px;
        }
    </style>
</head>
<body>
<div style="padding: 15px;text-align: center">
    <div id="record_btn" class="btn btn-primary">Record</div>
    <div id="upload_btn" class="btn btn-primary">Upload</div>
    <!--<div id="list_btn" class="btn btn-primary">List</div>-->
    <div id="playback_btn" class="btn btn-primary">Playback</div>
    <div id="review_btn" class="btn btn-primary">Review</div>

    <div class="btn-group">
        <button id="container_btn" type="button" class="btn btn-default active">Container</button>
        <button id="fs_btn" type="button" class="btn btn-default">Full Screen</button>
    </div>
</div>

<div id="containerEl" style="width: 640px;height: 480px;margin: 0 auto"></div>

<script>
//    window.goreactConfig = {
//        baseUrl: "https://192.168.33.10"
//    };
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="../build/widgets.js"></script>

<script>

    // references to DOM elements
    var $containerBtn = $('#container_btn');
    var $fullScreenBtn = $('#fs_btn');
    var $recordBtn = $('#record_btn');
    var $uploadBtn = $('#upload_btn');
    var $listBtn = $('#list_btn');
    var $playbackBtn = $('#playback_btn');
    var $reviewBtn = $('#review_btn');
    var $containerEl = $('#containerEl');

    var activeContainer = $containerEl[0];

    $recordBtn.click(function () {
        goreact.record({container: activeContainer});
    });

    $uploadBtn.click(function () {
        goreact.upload({container: activeContainer});
    });

    $listBtn.click(function () {
        goreact.list({container: activeContainer});
    });

    $playbackBtn.click(function () {
        goreact.playback({container: activeContainer});
    });

    $reviewBtn.click(function () {
        goreact.review({
            goreact_id: 4824,
            container: activeContainer
        });
    });

    $containerBtn.click(function () {
        activeContainer = $containerEl[0];
        $containerBtn.addClass('active');
        $fullScreenBtn.removeClass('active');
    });

    $fullScreenBtn.click(function () {
        activeContainer = null;
        $containerBtn.removeClass('active');
        $fullScreenBtn.addClass('active');
    });

    console.log("goreact", goreact);

    // :: goreact setup ::
    var signature = '5eb63bbbe01eeed093cb22bb8f5acdc3';
    var expires = 1413496405;
    var settings = {
//        api_key: "3d143dd5-1050-488c-80b7-e110dbb35d9fs",
        api_key: "3d143dd5-1050-488c-80b7-e110dbb35d9f",
        user_id: "5432b03462ccc7ea7bcc2c41",
        first_name: "John",
        last_name: "Smith",
        email: "john.smith@myexample.com",
        context_id: "5432b0923ea55a487d96b076",
        context_name: "Business Ed",
        context_role: "instructor",
        expires: expires
    };
    var auth = goreact.authorize(settings, signature);

    console.log("auth", auth);

    auth.on('success', function(evt, message) {
        console.log("auth success", message);
    });

    auth.on('error', function(evt, message) {
        console.log("auth error", message);
    });

//    promise.then(function(response) {
//        console.log("response", response);
//    });
    var recordWidget = goreact.record({
        title: 'My Recording',
        container: $containerEl[0]
    });

    console.log("recordWidget", recordWidget);

    recordWidget.on('ready', function (evt) {
        console.log("ready");
    });

    recordWidget.on('destroyed', function (evt) {
        console.log("destroyed");
    });

</script>
</body>
</html>