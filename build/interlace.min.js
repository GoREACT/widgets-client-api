!function(){var a=function(a,b,c){function d(a,b){var c,d;d=i[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return i[a]=i[a]||[],i[a].push(b),function(){d(a,b)}}function f(c,f){function g(){d(c,g),f.apply(b||a,arguments)}return e(c,g)}function g(b,c){return b&&b.apply(a,c)}function h(a){if(i[a])for(var b=0,c=i[a],d=c.length;d>b;)g(c[b],arguments),b+=1}var i={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.once=b[c.once]&&b[c.once].bind(b),a.fire=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.once=f,a.fire=h)},b=function(){function b(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}var c={},d="interlace-",e=0,f=function(a){var b=a?"?":"";for(var c in a)if(a[c].isArray)for(var d=0;d<a[c].length;d++)b+="?"===b?"":"&",b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]);else b+="?"===b?"":"&",b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]);return b},g=function(a,b){b=b||window.location.search;var c="[?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},h=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b};return c.load=function(g){var i=d+(e+=1),j=document.createElement("iframe"),k=g.params||{};k.interlace=i;var l=g.url+f(k);j.id=i,j.src=l,j.setAttribute("width","undefined"==typeof g.options.width?"100%":g.options.width),j.setAttribute("height","undefined"==typeof g.options.height?"100%":g.options.height),j.setAttribute("scrolling","no"),j.setAttribute("marginheight","0"),j.setAttribute("frameborder","0"),j.setAttribute("allowtransparency","true"),j.setAttribute("style","display:none"),j.send=function(a,b){c.send(j,a,b)},j.onload=function(){j.removeAttribute("style"),g.class&&j.setAttribute("class",g.class),j.fire("ready")};var m=g.container;return b(m)?m.setAttribute("data-ic","container-"+i):"object"==typeof m?(m=document.createElement("div"),m.setAttribute("data-ic","container-"+i),m.setAttribute("style",h(g.container)),document.body.appendChild(m)):"undefined"==typeof m&&(m=document.createElement("div"),m.setAttribute("data-ic","container-"+i),m.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;z-index:99999"),document.body.appendChild(m)),m.appendChild(j),a(j),j},c.send=function(a,b,c){c=c||{},c.$$id=a.id||g("interlace"),c.$$event=b;var d=JSON.stringify(c),e=a.contentWindow||a;e.postMessage(d,"*")},a(c),window.addEventListener("message",function(a){var b=JSON.parse(a.data),d=b.$$id,e=b.$$event;delete b.$$id,delete b.$$event,console.log("message received",b);var f=document.getElementById(d);f?f.fire(e,b):c.fire(e,b)}),c}();window.interlace=b}();