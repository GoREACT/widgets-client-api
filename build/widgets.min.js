(function(a,b){function c(){var a=i.length;for(i.reverse();a--;){var b=Array.prototype.slice.call(i[a]),c=b.shift();("authorize"===c||"on"===c||"off"===c)&&d.hasOwnProperty(c)&&(i.splice(a,1),d[c].apply(d,b))}}var d=a["goreact"],e=function(){function b(a){return JSON.parse(JSON.stringify(a))}function c(a){return d(arguments,function(b){b!==a&&d(b,function(b,c){a[c]=b})}),a}function d(a,b,c){var e;if(a)if(h(a))for(e in a)"prototype"==e||"length"==e||"name"==e||a.hasOwnProperty&&!a.hasOwnProperty(e)||b.call(c,a[e],e);else if(a.forEach&&a.forEach!==d)a.forEach(b,c);else if(g(a))for(e=0;e<a.length;e++)b.call(c,a[e],e);else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e);return a}function e(a){return"string"==typeof a}function f(a){return"[object Array]"===v.call(a)}function g(a){if(null===a||k(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:e(a)||f(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function h(a){return"function"==typeof a}function i(a){return null!==a&&"object"==typeof a}function j(a){return"undefined"!=typeof a}function k(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function l(a){return e(a)?a.toLowerCase():a}function m(a){return parseInt(a,10)}function n(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}function o(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f?o(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&").replace(/%20/g,"+")}function p(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function q(){var a=m((/msie (\d+)/.exec(l(navigator.userAgent))||[])[1],10);return isNaN(a)&&(a=m((/trident\/.*; rv:(\d+)/.exec(l(navigator.userAgent))||[])[1],10)),a}function r(b){if(8>=w&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw new Error("noxhr","This browser does not support XMLHttpRequest.")}function s(a,b){var c=a,d=document.createElement("a");return w&&(d.setAttribute("href",c),c=d.href),d.setAttribute("href",c),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:"/"===d.pathname.charAt(0)?d.pathname:"/"+d.pathname}}function t(a,b,c,e,f,g,h){function i(a,c,d,e,f){0===c&&(c=d?200:"file"==s(b).protocol?404:0),c=1223===c?204:c,f=f||"",a(c,d,e,f)}var k,l=-1,m=r(a);if(m.open(a,b,!0),d(f,function(a,b){j(a)&&m.setRequestHeader(b,a)}),m.onreadystatechange=function(){if(m&&4==m.readyState){var a=null,b=null;k!==l&&(a=m.getAllResponseHeaders(),b="response"in m?m.response:m.responseText),i(e,k||m.status,b,a,m.statusText||"")}},g&&(m.withCredentials=!0),h)try{m.responseType=h}catch(n){if("json"!==h)throw n}m.send(c||null)}var u={},v=Object.prototype.toString,w=q();return u.clone=b,u.extend=c,u.forEach=d,u.isFunction=h,u.isObject=i,u.isArray=f,u.isArrayLike=g,u.isString=e,u.isDefined=j,u.isWindow=k,u["int"]=m,u.lowercase=l,u.isElement=n,u.serialize=o,u.styleToString=p,u.sendRequest=t,u}(),f={};String.prototype.supplant||(String.prototype.supplant=function(a){return this.replace(/\{([^{}]*)\}/g,function(b,c){var d=a[c];return"string"==typeof d||"number"==typeof d?d:b})});var g=function(a,b,c){function d(a,b){var c,d;d=i[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return i[a]=i[a]||[],i[a].push(b),function(){d(a,b)}}function f(c,f){function g(){d(c,g),f.apply(b||a,arguments)}return e(c,g)}function g(b,c){return b&&b.apply(a,c)}function h(a){if(i[a])for(var b=0,c=i[a],d=c.length;d>b;)g(c[b],arguments),b+=1}var i={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.once=b[c.once]&&b[c.once].bind(b),a.fire=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.once=f,a.fire=h)},h=function(){var a={},b="widget_",c="widget-container",d=0;return a.load=function(a){var f=document.createElement("div"),h=a.params||{},i=a.url+(-1===a.url.indexOf("?")?"?":"&")+e.serialize(h),j="";f.id=b+(d+=1),f.className=c,f.style.position="relative",f.style.width="100%",f.style.height="100%";var k=document.createElement("style");k.type="text/css",k.innerHTML=".widget-container .load{position:absolute;width:600px;height:36px;left:50%;top:40%;margin-left:-300px;overflow:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;z-index:9999}.widget-container .load div{position:absolute;width:20px;height:36px;opacity:0;font-family:Helvetica,Arial,sans-serif;animation:move 2s linear infinite;-o-animation:move 2s linear infinite;-moz-animation:move 2s linear infinite;-webkit-animation:move 2s linear infinite;transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);color:#aaa}.widget-container .load div:nth-child(2){animation-delay:.2s;-o-animation-delay:.2s;-moz-animation-delay:.2s;-webkit-animation-delay:.2s}.widget-container .load div:nth-child(3){animation-delay:.4s;-o-animation-delay:.4s;-webkit-animation-delay:.4s}.widget-container .load div:nth-child(4){animation-delay:.6s;-o-animation-delay:.6s;-moz-animation-delay:.6s;-webkit-animation-delay:.6s}.widget-container .load div:nth-child(5){animation-delay:.8s;-o-animation-delay:.8s;-moz-animation-delay:.8s;-webkit-animation-delay:.8s}.widget-container .load div:nth-child(6){animation-delay:1s;-o-animation-delay:1s;-moz-animation-delay:1s;-webkit-animation-delay:1s}.widget-container .load div:nth-child(7){animation-delay:1.2s;-o-animation-delay:1.2s;-moz-animation-delay:1.2s;-webkit-animation-delay:1.2s}@keyframes move{0%{left:0;opacity:0}35%{left:41%;-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0);opacity:1}65%{left:59%;-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0);opacity:1}100%{left:100%;-moz-transform:rotate(-180deg);-webkit-transform:rotate(-180deg);-o-transform:rotate(-180deg);transform:rotate(-180deg);opacity:0}}@-moz-keyframes move{0%{left:0;opacity:0}35%{left:41%;-moz-transform:rotate(0);transform:rotate(0);opacity:1}65%{left:59%;-moz-transform:rotate(0);transform:rotate(0);opacity:1}100%{left:100%;-moz-transform:rotate(-180deg);transform:rotate(-180deg);opacity:0}}@-webkit-keyframes move{0%{left:0;opacity:0}35%{left:41%;-webkit-transform:rotate(0);transform:rotate(0);opacity:1}65%{left:59%;-webkit-transform:rotate(0);transform:rotate(0);opacity:1}100%{left:100%;-webkit-transform:rotate(-180deg);transform:rotate(-180deg);opacity:0}}@-o-keyframes move{0%{left:0;opacity:0}35%{left:41%;-o-transform:rotate(0);transform:rotate(0);opacity:1}65%{left:59%;-o-transform:rotate(0);transform:rotate(0);opacity:1}100%{left:100%;-o-transform:rotate(-180deg);transform:rotate(-180deg);opacity:0}}",f.appendChild(k);var l=document.createElement("div");l.className="load",e.forEach(["G","N","I","D","A","O","L"],function(a){var b=document.createElement("div");b.innerText=a,l.appendChild(b)}),f.appendChild(l),f.show=function(){"none"===f.parentNode.style.display&&(f.parentNode.style.display=j),f.fire("shown")},f.hide=function(){j||(j=f.parentNode.style.display,f.parentNode.style.display="none"),f.fire("hidden")},f.destroy=function(){f.parentNode.removeChild(f),f.fire("destroyed")};var m=a.container;for(e.isElement(m)||(m?"object"==typeof m&&(m=document.createElement("div"),m.setAttribute("data-widget","container-"+f.id),m.setAttribute("style",e.styleToString(a.container)),document.body.appendChild(m)):(m=document.createElement("div"),m.setAttribute("data-widget","container-"+f.id),m.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;z-index:99999"),document.body.appendChild(m)));m.firstChild;){var n=m.firstChild;n.destroy()}return m.appendChild(f),g(f),f.on("ready",function(){l.style.display="none"}),f.on("destroyed",function(){f.off()}),e.sendRequest("GET",i,{},function(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=[],e=c.getElementsByTagName("script"),g=e.length;g--;){for(var h=document.createElement("script"),i=["type","src","text"],j=0;j<i.length;j++){var k=i[j];e[g][k]&&(h[k]=e[g][k])}d.push(h),e[g].parentNode.removeChild(e[g])}for(g=0;g<c.children.length;g++)f.appendChild(c.children[g]);for(g=0;g<d.length;g++)f.lastChild.appendChild(d[g]);f.fire("loaded")}),f},g(a),a}(),i=d.q||d;d.hasOwnProperty("q")&&(d=a["goreact"]=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();d.hasOwnProperty(b)&&d[b].apply(d,a)}),g(d),d.on("authorize::success",function(){for(var a=i.length,b=0;a>b;b+=1){var c=Array.prototype.slice.call(i[b]),e=c.shift();if(d.hasOwnProperty(e))try{d[e].apply(d,c)}catch(f){}}i.length=0}),setTimeout(c),d.authorize=function(a,b){function c(a){e.isObject(a)&&a["transient"]&&(e.extend(f,{"transient":a["transient"]}),delete a["transient"])}var g=e.clone(a);g.signature=b,a.api_key&&0===a.api_key.indexOf("sb")?d.config.baseUrl="https://sandbox.goreact.com":a.api_key&&0===a.api_key.indexOf("dev")&&(d.config.baseUrl="https://dev.goreact.com");var h=d.config.baseUrl+"/v2/widgets/auth";h=h+(-1===h.indexOf("?")?"?":"&")+e.serialize(g),e.sendRequest("GET",h+"?",{},function(a,b){b?(c(b),200===a?d.fire("authorize::success",this,b.message):d.fire("authorize::error",this,b.message)):d.fire("authorize::error",this,"")},{},!1,"json")},d.destroy=function(a){var b=document.getElementById(a);b&&b.destroy()},function(){"use strict";var a={upload:"/v2/widgets/upload",record:"/v2/widgets/record",list:"@@listUri",playback:"/v2/widgets/playback",review:""};e.forEach(a,function(a,b){d[b]=function(c){c=c||{};var g=e.clone(c);e.extend(g,f),g.mode="collaborate";var i=h.load({container:c.container,url:d.config.baseUrl+a,params:g});return i.type=b,i.on("hide",function(){i.hide()}),i.on("show",function(){i.show()}),i.on("destroy",function(){i.destroy()}),i.id}})}()}).bind(window)(window);