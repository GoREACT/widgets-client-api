!function(){function a(){var a=g.length;for(g.reverse();a--;){var c=Array.prototype.slice.call(g[a]),d=c.shift();("authorize"===d||"on"===d||"off"===d)&&b.hasOwnProperty(d)&&(g.splice(a,1),b[d].apply(b,c))}}var b=window["goreact"],c=function(){function a(a){return JSON.parse(JSON.stringify(a))}function b(a){return c(arguments,function(b){b!==a&&c(b,function(b,c){a[c]=b})}),a}function c(a,b,d){var e;if(a)if(g(a))for(e in a)"prototype"==e||"length"==e||"name"==e||a.hasOwnProperty&&!a.hasOwnProperty(e)||b.call(d,a[e],e);else if(a.forEach&&a.forEach!==c)a.forEach(b,d);else if(f(a))for(e=0;e<a.length;e++)b.call(d,a[e],e);else for(e in a)a.hasOwnProperty(e)&&b.call(d,a[e],e);return a}function d(a){return"string"==typeof a}function e(a){return"[object Array]"===t.call(a)}function f(a){if(null==a||j(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:d(a)||e(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function g(a){return"function"==typeof a}function h(a){return null!=a&&"object"==typeof a}function i(a){return"undefined"!=typeof a}function j(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function k(a){return d(a)?a.toLowerCase():a}function l(a){return parseInt(a,10)}function m(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}function n(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f?n(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&").replace(/%20/g,"+")}function o(){var a=l((/msie (\d+)/.exec(k(navigator.userAgent))||[])[1],10);return isNaN(a)&&(a=l((/trident\/.*; rv:(\d+)/.exec(k(navigator.userAgent))||[])[1],10)),a}function p(a){if(8>=u&&(!a.match(/^(get|post|head|put|delete|options)$/i)||!window.XMLHttpRequest))return new window.ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw new Error("noxhr","This browser does not support XMLHttpRequest.")}function q(a,b){var c=a,d=document.createElement("a");return u&&(d.setAttribute("href",c),c=d.href),d.setAttribute("href",c),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:"/"===d.pathname.charAt(0)?d.pathname:"/"+d.pathname}}function r(a,b,d,e,f,g,h){function j(a,c,d,e,f){0===c&&(c=d?200:"file"==q(b).protocol?404:0),c=1223===c?204:c,f=f||"",a(c,d,e,f)}var k,l=-1,m=p(a);if(m.open(a,b,!0),c(f,function(a,b){i(a)&&m.setRequestHeader(b,a)}),m.onreadystatechange=function(){if(m&&4==m.readyState){var a=null,b=null;k!==l&&(a=m.getAllResponseHeaders(),b="response"in m?m.response:m.responseText),j(e,k||m.status,b,a,m.statusText||"")}},g&&(m.withCredentials=!0),h)try{m.responseType=h}catch(n){if("json"!==h)throw n}m.send(d||null)}var s={},t=Object.prototype.toString,u=o();return s.clone=a,s.extend=b,s.forEach=c,s.isFunction=g,s.isObject=h,s.isArray=e,s.isString=d,s.lowercase=k,s.isElement=m,s.serialize=n,s.createHttpBackend=r,s}(),d={};String.prototype.supplant||(String.prototype.supplant=function(a){return this.replace(/\{([^{}]*)\}/g,function(b,c){var d=a[c];return"string"==typeof d||"number"==typeof d?d:b})});var e=function(a,b,c){function d(a,b){var c,d;d=i[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return i[a]=i[a]||[],i[a].push(b),function(){d(a,b)}}function f(c,f){function g(){d(c,g),f.apply(b||a,arguments)}return e(c,g)}function g(b,c){return b&&b.apply(a,c)}function h(a){if(i[a])for(var b=0,c=i[a],d=c.length;d>b;)g(c[b],arguments),b+=1}var i={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.once=b[c.once]&&b[c.once].bind(b),a.fire=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.once=f,a.fire=h)},f=function(){function a(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}var b={},d="widget_",f=0;return b.load=function(b){var g=document.createElement("div"),h=b.params||{},i=b.url+(-1===b.url.indexOf("?")?"?":"&")+c.serialize(h),j="";console.log(b),g.id=d+(f+=1),g.show=function(){"none"===g.parentNode.style.display&&(g.parentNode.style.display=j)},g.hide=function(){j||(j=g.parentNode.style.display,g.parentNode.style.display="none")},g.destroy=function(){g.parentNode.removeChild(g),g.fire("destroyed")};var k=b.container;return c.isElement(k)||(k?"object"==typeof k&&(k=document.createElement("div"),k.setAttribute("data-widget","container-"+g.id),k.setAttribute("style",a(b.container)),document.body.appendChild(k)):(k=document.createElement("div"),k.setAttribute("data-widget","container-"+g.id),k.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;z-index:99999"),document.body.appendChild(k))),k.appendChild(g),e(g),console.log("widget",g),c.createHttpBackend("GET",i,{},function(a){console.log("html",a),g.fire("loaded")}),g},e(b),b}(),g=b.q||b;b.hasOwnProperty("q")&&(b=window["goreact"]=function(){var a=Array.prototype.slice.call(arguments),c=a.shift();b.hasOwnProperty(c)&&b[c].apply(b,a)}),e(b),b.on("authorize::success",function(){for(var a=g.length,c=0;a>c;c+=1){var d=Array.prototype.slice.call(g[c]),e=d.shift();if(b.hasOwnProperty(e))try{b[e].apply(b,d)}catch(f){}}g.length=0}),setTimeout(a),function(){var a="authorize";b.baseUrl="https://goreact.com",b[a]=function(a,e){function g(a){c.isObject(a)&&a["transient"]&&(c.extend(d,{"transient":a["transient"]}),delete a["transient"])}f.prefix("widget_");var h=c.clone(a);h.signature=e,a.api_key&&0===a.api_key.indexOf("sb")?b.baseUrl="https://sandbox.goreact.com":a.api_key&&0===a.api_key.indexOf("dev")&&(b.baseUrl="https://dev.goreact.com");var i=f.load({url:b.baseUrl+"/v1/auth",params:h,options:{width:"0px",height:"0px"}});return i.parentNode.removeAttribute("style"),i.type="authorize",i.on("success",function(a,c){g(c),i.destroy(),b.fire("authorize::success",this,c)}),i.on("error",function(a,c){g(c),i.destroy(),b.fire("authorize::error",this,c)}),i.id}}(),function(){var a="collaborate";b[a]=function(e){e=e||{};var g=e.container;delete e.container;var h=c.clone(e);c.extend(h,d),h.mode="collaborate";var i=f.load({container:g,url:b.baseUrl+"/v1/session",params:h});return i.type=a,i.on("destroy",function(){i.destroy()}),i.on("hide",function(){i.hide()}),i.on("show",function(){i.show()}),i.on("destroyed",function(){b.fire(a+"::destroyed",this)}),i.on("error",function(c,d){b.fire(a+"::error",this,d)}),i.on("sessionReady",function(){b.fire(a+"::ready",this)}),i.id}}(),b.destroy=function(a){var b=document.getElementById(a);b&&b.fire("destroy")},function(){var a="list";b[a]=function(a){return"Not supported yet"}}(),function(){var a="playback";b[a]=function(e){e=e||{};var g=e.container;delete e.container;var h=c.clone(e);c.extend(h,d);var i=f.load({container:g,url:b.baseUrl+"/v1/playback",params:h});return i.type=a,i.on("destroy",function(){i.destroy()}),i.on("hide",function(){i.hide()}),i.on("show",function(){i.show()}),i.on("error",function(c,d){b.fire(a+"::error",this,d)}),i.on("destroyed",function(){b.fire(a+"::destroyed",this)}),i.on("playbackReady",function(){b.fire(a+"::ready",this)}),i.on("playbackOnPlay",function(){b.fire(a+"::play",this)}),i.on("playbackOnPause",function(){b.fire(a+"::pause",this)}),i.on("playbackOnSeek",function(){b.fire(a+"::seek",this)}),i.on("playbackOnBuffer",function(){b.fire(a+"::buffer",this)}),i.on("playbackOnError",function(){b.fire(a+"::playError",this)}),i.id}}(),function(){var a="record";b[a]=function(e){e=e||{};var g=e.container;delete e.container;var h=c.clone(e);c.extend(h,d);var i=f.load({container:g,url:b.baseUrl+"/v1/record",params:h});return i.type=a,i.on("destroy",function(){i.destroy()}),i.on("hide",function(){i.hide()}),i.on("show",function(){i.show()}),i.on("error",function(c,d){b.fire(a+"::error",this,d)}),i.on("destroyed",function(){b.fire(a+"::destroyed",this)}),i.on("recordReady",function(c,d){b.fire(a+"::ready",this,d)}),i.on("recordStart",function(c,d){b.fire(a+"::start",this,d)}),i.on("recordStarted",function(c,d){b.fire(a+"::started",this,d)}),i.on("recordStop",function(c,d){b.fire(a+"::stop",this,d)}),i.on("recordStopped",function(c,d){b.fire(a+"::stopped",this,d)}),i.on("recordPost",function(c,d){b.fire(a+"::post",this,d)}),i.on("recordPostSuccess",function(c,d){b.fire(a+"::postSuccess",this,d)}),i.on("recordPostError",function(c,d){b.fire(a+"::postError",this,d)}),i.on("recordDiscard",function(c,d){b.fire(a+"::discard",this,d)}),i.on("recordDiscardSuccess",function(c,d){b.fire(a+"::discardSuccess",this,d)}),i.on("recordDiscardError",function(c,d){b.fire(a+"::discardError",this,d)}),i.on("recordTimeout",function(c,d){b.fire(a+"::timeout",this,d)}),i.id}}(),function(){var a="upload";b[a]=function(e){e=e||{};var g=e.container;delete e.container;var h=c.clone(e);c.extend(h,d);var i=f.load({container:g,url:b.baseUrl+"/v1/upload",params:h});return i.type=a,i.on("destroy",function(){i.destroy()}),i.on("hide",function(){i.hide()}),i.on("show",function(){i.show()}),i.on("error",function(c,d){b.fire(a+"::error",this,d)}),i.on("destroyed",function(c,d){b.fire(a+"::destroyed",this,d)}),i.on("uploadReady",function(c,d){b.fire(a+"::ready",this,d)}),i.on("uploadActive",function(c,d){b.fire(a+"::active",this,d)}),i.on("uploadFileAdded",function(c,d){b.fire(a+"::fileAdded",this,d)}),i.on("uploadStart",function(c,d){b.fire(a+"::start",this,d)}),i.on("uploadStop",function(c,d){b.fire(a+"::stop",this,d)}),i.on("uploadSubmit",function(c,d){b.fire(a+"::submit",this,d)}),i.on("uploadUserAborted",function(c,d){b.fire(a+"::userAborted",this,d)}),i.on("uploadSuccess",function(c,d){b.fire(a+"::success",this,d)}),i.on("uploadFailed",function(c,d){b.fire(a+"::failed",this,d)}),i.on("uploadPost",function(c,d){b.fire(a+"::post",this,d)}),i.on("uploadPostSuccess",function(c,d){b.fire(a+"::postSuccess",this,d)}),i.on("uploadPostError",function(c,d){b.fire(a+"::postError",this,d)}),i.id}}()}();